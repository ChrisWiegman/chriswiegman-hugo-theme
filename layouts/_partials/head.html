<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
{{- $title := ( .Title ) -}}
{{- $siteTitle := ( .Site.Title ) -}}
{{- if .IsHome -}}
<title>{{ $siteTitle }}{{- if isset .Site.Params "subtitle" -}} - {{ .Site.Params.Subtitle }}{{- end -}}</title>
{{- else -}}
<title>{{ $title }} - {{ $siteTitle }}</title>
{{- end -}}
<meta name="description" content="{{- if .IsHome -}}
  {{ .Site.Params.description }}
{{- else if and (isset .Params "description") (ne (trim .Params.description " ") "") -}}
  {{ .Params.description }}
{{- else -}}
  {{ .Summary | plainify | truncate 160 }}
{{- end -}}">
{{- if not .IsHome -}}
<meta name="keywords" content="{{ if .IsPage}}{{ range $index, $tag := .Params.tags }}{{ $tag }},{{ end }}{{ else }}{{ range $plural, $terms := .Site.Taxonomies }}{{ range $term, $val := $terms }}{{ printf "%s," $term }}{{ end }}{{ end }}{{ end }}" />
{{- end -}}
{{ with .OutputFormats.Get "rss" -}}
{{ printf `
<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
{{- end -}}
<link rel="canonical" href="{{ .Permalink }}" />
{{ $options := (dict "targetPath" "css/main.css" "outputStyle" "compressed") }}
{{ $style := resources.Get "scss/main.scss" | toCSS $options | minify | fingerprint }}
<link rel="stylesheet" type="text/css" media="screen" href="{{ $style.Permalink }}"
  integrity="{{ $style.Data.Integrity }}" />
{{- if eq .Type "library" -}}
{{- $libraryStyle := resources.Get "scss/library.scss" | toCSS $options | minify | fingerprint -}}
<link rel="stylesheet" href="{{ $libraryStyle.Permalink }}" integrity="{{ $libraryStyle.Data.Integrity }}" />
{{- end -}}
{{- if .Page.Store.Get "needsChroma" -}}
{{- $highlightStyle := resources.Get "scss/gruvbox.scss" | toCSS $options | minify | fingerprint -}}
<link rel="stylesheet" href="{{ $highlightStyle.Permalink }}" integrity="{{ $highlightStyle.Data.Integrity }}" />
{{- end -}}
<link rel="apple-touch-icon" sizes="180x180" href="{{ "/apple-touch-icon.png" | absURL }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ "/favicon-32x32.png" | absURL }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ "/favicon-16x16.png" | absURL }}">
<link rel="icon" type="image/x-icon" href="{{ "/favicon.ico" | absURL }}">
<link rel="manifest" href="{{ "/site.webmanifest" | absURL }}">
{{- if isset .Site.Params "mobilewebapptitle" -}}
<meta name="apple-mobile-web-app-title" content="{{ .Site.Params.MobileWebAppTitle }}" />
{{- end -}}
{{- if isset .Site.Params "fediversecreator" -}}
<meta name="fediverse:creator" content="{{ .Site.Params.FediverseCreator }}" />
{{- end -}}
{{- if .Site.Params.OpenGraph -}}
{{- partial "opengraph.html" . -}}
{{- end -}}
{{- if .Site.Params.TwitterCards -}}
{{- partial "twitter_cards.html" . -}}
{{- end -}}
{{ partial "schema.html" . }}